(()=>{var e={};e.id=883,e.ids=[883],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},6407:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>I});var r=s(60687),o=s(43210);let l=s(51060).A.create({baseURL:"http://localhost:3001/api",headers:{"Content-Type":"application/json"}});l.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e});class i{constructor(){}static getInstance(){return i.instance||(i.instance=new i),i.instance}async getFollowers(){return(await l.get("/follows")).data.data}async getFollowing(){return(await l.get("/follows/following")).data.data}async getSuggestions(){return(await l.get("/follows/suggestions")).data.data}async followUser(e){await l.post(`/follows/follow/${e}`)}async unfollowUser(e){await l.delete(`/follows/unfollow/${e}`)}}let a=i.getInstance(),n=()=>{let[e,t]=(0,o.useState)("followers"),[s,r]=(0,o.useState)([]),[l,i]=(0,o.useState)([]),[n,d]=(0,o.useState)([]),[c,u]=(0,o.useState)({followers:!1,following:!1,suggestions:!1}),h=(0,o.useCallback)(async()=>{if(0===s.length){u(e=>({...e,followers:!0}));try{let e=await a.getFollowers();r(e)}catch(e){console.error("Error fetching followers:",e)}finally{u(e=>({...e,followers:!1}))}}},[s.length]),g=(0,o.useCallback)(async()=>{if(0===l.length){u(e=>({...e,following:!0}));try{let e=await a.getFollowing();i(e)}catch(e){console.error("Error fetching following:",e)}finally{u(e=>({...e,following:!1}))}}},[l.length]),p=(0,o.useCallback)(async()=>{if(0===n.length){u(e=>({...e,suggestions:!0}));try{let e=await a.getSuggestions();d(e)}catch(e){console.error("Error fetching suggestions:",e)}finally{u(e=>({...e,suggestions:!1}))}}},[n.length]),f=(0,o.useCallback)(async e=>{try{d(t=>t.map(t=>t.id===e?{...t,isFollowing:!0}:t)),await a.followUser(e),d(t=>t.map(t=>t.id===e?{...t,followersCount:t.followersCount+1}:t))}catch(t){console.error("Error following user:",t),d(t=>t.map(t=>t.id===e?{...t,isFollowing:!1}:t))}},[]),x=(0,o.useCallback)(async e=>{try{i(t=>t.filter(t=>t.id!==e)),await a.unfollowUser(e)}catch(e){console.error("Error unfollowing user:",e),g()}},[g]),m=(0,o.useCallback)(e=>{switch(e){case"followers":h();break;case"following":g();break;case"suggestions":p()}},[h,g,p]);return{followers:s,following:l,suggestions:n,activeTab:e,setActiveTab:(0,o.useCallback)(e=>{t(e),m(e)},[m]),isLoadingFollowers:c.followers,isLoadingFollowing:c.following,isLoadingSuggestions:c.suggestions,handleFollow:f,handleUnfollow:x,refreshSuggestions:p}};var d=s(40346),c=s(99445),u=s(41612),h=s(16537),g=s(61279),p=s(88144),f=s(82287),x=s(3802),m=s(68704),b=s(9808),w=s(42176),v=s(23376),j=s(13254),y=s(28028),k=s(46521),P=s(6445),S=(0,P.A)("outline","clock","IconClock",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 7v5l3 3",key:"svg-1"}]]),T=(0,P.A)("outline","user-minus","IconUserMinus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4c.348 0 .686 .045 1.009 .128",key:"svg-1"}],["path",{d:"M16 19h6",key:"svg-2"}]]),E=s(28560),C=s(37202),z=s(87552),_=s(72540);let F=({user:e,onFollow:t,onUnfollow:s,isLoading:o,showMutualFollowers:l=!1})=>(0,r.jsx)(d.Z,{withBorder:!0,padding:"lg",radius:"md",children:(0,r.jsxs)(c.Y,{justify:"space-between",align:"flex-start",children:[(0,r.jsxs)(c.Y,{gap:"sm",children:[(0,r.jsx)(u.e,{src:e.avatar,alt:e.username,size:"lg",radius:"xl"}),(0,r.jsxs)("div",{children:[(0,r.jsx)(h.E,{fw:500,size:"lg",children:e.fullName}),(0,r.jsxs)(h.E,{size:"sm",c:"dimmed",children:["@",e.username]}),e.bio&&(0,r.jsx)(h.E,{size:"sm",mt:"xs",lineClamp:2,children:e.bio}),(0,r.jsxs)(c.Y,{gap:"xs",mt:"xs",children:[(0,r.jsx)(g.E,{variant:"light",color:"ONLINE"===e.status?"green":"gray",children:e.status}),(0,r.jsxs)(c.Y,{gap:4,children:[(0,r.jsx)(S,{size:14}),(0,r.jsx)(h.E,{size:"xs",c:"dimmed",children:(0,z.m)(new Date(e.lastSeen),{addSuffix:!0,locale:_.vi})})]}),l&&e.mutualFollowersCount&&e.mutualFollowersCount>0&&(0,r.jsxs)(h.E,{size:"xs",c:"dimmed",children:[e.mutualFollowersCount," bạn chung"]})]})]})]}),(0,r.jsx)(p.m,{label:e.isFollowing?"Hủy theo d\xf5i":"Theo d\xf5i",position:"left",children:(0,r.jsx)(f.M,{variant:e.isFollowing?"light":"filled",color:e.isFollowing?"red":"blue",size:"lg",radius:"xl",onClick:()=>e.isFollowing?s(e.id):t(e.id),loading:o,children:e.isFollowing?(0,r.jsx)(T,{size:20}):(0,r.jsx)(E.A,{size:20})})})]})}),q=({user:e,onFollow:t,isLoading:s})=>(0,r.jsx)(d.Z,{withBorder:!0,padding:"md",radius:"md",children:(0,r.jsxs)(c.Y,{justify:"space-between",align:"center",children:[(0,r.jsxs)(c.Y,{gap:"sm",children:[(0,r.jsx)(u.e,{src:e.avatar,alt:e.username,size:"md",radius:"xl"}),(0,r.jsxs)("div",{children:[(0,r.jsx)(h.E,{fw:500,size:"sm",children:e.fullName}),(0,r.jsxs)(h.E,{size:"xs",c:"dimmed",children:["@",e.username]}),e.mutualFollowersCount&&e.mutualFollowersCount>0&&(0,r.jsxs)(h.E,{size:"xs",c:"dimmed",mt:2,children:[e.mutualFollowersCount," bạn chung"]})]})]}),(0,r.jsx)(x.$,{variant:"light",color:"blue",size:"xs",radius:"xl",leftSection:(0,r.jsx)(E.A,{size:14}),onClick:()=>t(e.id),loading:s,children:"Theo d\xf5i"})]})}),A=()=>(0,r.jsx)(m.B,{gap:"md",children:[1,2,3].map(e=>(0,r.jsx)(d.Z,{withBorder:!0,padding:"lg",radius:"md",children:(0,r.jsxs)(c.Y,{gap:"sm",children:[(0,r.jsx)(b.E,{height:50,circle:!0}),(0,r.jsxs)("div",{style:{flex:1},children:[(0,r.jsx)(b.E,{height:20,width:"40%",mb:"xs"}),(0,r.jsx)(b.E,{height:15,width:"20%"})]})]})},e))}),D=()=>(0,r.jsx)(m.B,{gap:"md",children:[1,2,3,4,5].map(e=>(0,r.jsx)(d.Z,{withBorder:!0,padding:"md",radius:"md",children:(0,r.jsxs)(c.Y,{gap:"sm",children:[(0,r.jsx)(b.E,{height:40,circle:!0}),(0,r.jsxs)("div",{style:{flex:1},children:[(0,r.jsx)(b.E,{height:16,width:"30%",mb:"xs"}),(0,r.jsx)(b.E,{height:12,width:"20%"})]}),(0,r.jsx)(b.E,{height:24,width:80,radius:"xl"})]})},e))}),I=()=>{let{followers:e,following:t,suggestions:s,activeTab:l,setActiveTab:i,handleFollow:a,handleUnfollow:d,refreshSuggestions:u}=n(),[g,p]=(0,o.useState)(!1),[f,b]=(0,o.useState)(!1),[P,S]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{"followers"===l?(p(!0),setTimeout(()=>p(!1),500)):"following"===l?(b(!0),setTimeout(()=>b(!1),500)):"suggestions"===l&&(S(!0),setTimeout(()=>S(!1),500))},[l]),(0,r.jsxs)(w.m,{size:"md",py:"xl",children:[(0,r.jsx)(v.h,{order:2,mb:"xl",children:"Quan hệ"}),(0,r.jsxs)(j.t,{value:l,onChange:e=>{("followers"===e||"following"===e||"suggestions"===e)&&i(e)},children:[(0,r.jsxs)(j.t.List,{grow:!0,mb:"md",children:[(0,r.jsxs)(j.t.Tab,{value:"followers",children:["Người theo d\xf5i (",e?.length||0,")"]}),(0,r.jsxs)(j.t.Tab,{value:"following",children:["Đang theo d\xf5i (",t?.length||0,")"]}),(0,r.jsxs)(j.t.Tab,{value:"suggestions",children:["Gợi \xfd (",s?.length||0,")"]})]}),(0,r.jsx)(j.t.Panel,{value:"followers",children:g?(0,r.jsx)(A,{}):(0,r.jsxs)(m.B,{gap:"md",children:[e?.map(e=>r.jsx(F,{user:e,onFollow:a,onUnfollow:d,isLoading:g},e.id)),e?.length===0&&(0,r.jsx)(h.E,{c:"dimmed",ta:"center",py:"xl",children:"Chưa c\xf3 người theo d\xf5i"})]})}),(0,r.jsx)(j.t.Panel,{value:"following",children:f?(0,r.jsx)(A,{}):(0,r.jsxs)(m.B,{gap:"md",children:[t?.map(e=>r.jsx(F,{user:e,onFollow:a,onUnfollow:d,isLoading:f},e.id)),t?.length===0&&(0,r.jsx)(h.E,{c:"dimmed",ta:"center",py:"xl",children:"Chưa theo d\xf5i ai"})]})}),(0,r.jsx)(j.t.Panel,{value:"suggestions",children:(0,r.jsxs)(m.B,{gap:"md",children:[(0,r.jsxs)(c.Y,{justify:"space-between",align:"center",children:[(0,r.jsx)(h.E,{fw:500,size:"lg",children:"Gợi \xfd cho bạn"}),(0,r.jsx)(x.$,{variant:"subtle",color:"gray",size:"xs",leftSection:(0,r.jsx)(C.A,{size:14}),onClick:u,loading:P,children:"L\xe0m mới"})]}),(0,r.jsx)(y.c,{}),P?(0,r.jsx)(D,{}):(0,r.jsxs)(m.B,{gap:"md",children:[s?.map(e=>r.jsx(q,{user:e,onFollow:a,onUnfollow:d,isLoading:P,showMutualFollowers:!0},e.id)),s?.length===0&&(0,r.jsx)(k.o,{py:"xl",children:(0,r.jsx)(h.E,{c:"dimmed",ta:"center",children:"Kh\xf4ng c\xf3 gợi \xfd n\xe0o"})})]})]})})]})]})}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11867:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\Projects\\\\WebSocket-Social\\\\fe-websocket\\\\src\\\\app\\\\(layout)\\\\follows\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\Projects\\WebSocket-Social\\fe-websocket\\src\\app\\(layout)\\follows\\page.tsx","default")},12412:e=>{"use strict";e.exports=require("assert")},13254:(e,t,s)=>{"use strict";s.d(t,{t:()=>F});var r=s(60687),o=s(24384),l=s(94365);function i(e,t){return s=>{if("string"!=typeof s||0===s.trim().length)throw Error(t);return`${e}-${s}`}}s(43210);var a=s(15048),n=s(44968),d=s(45932),c=s(14788),u=s(25800),h=s(46198),g=s(13451),p=s(44176);let[f,x]=(0,s(32926).F)("Tabs component was not found in the tree");var m={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};let b={},w=(0,p.P9)((e,t)=>{let s=(0,u.Y)("TabsList",b,e),{children:o,className:l,grow:i,justify:a,classNames:n,styles:d,style:c,mod:h,...p}=s,f=x();return(0,r.jsx)(g.a,{...p,...f.getStyles("list",{className:l,style:c,classNames:n,styles:d,props:s,variant:f.variant}),ref:t,role:"tablist",variant:f.variant,mod:[{grow:i,orientation:f.orientation,placement:"vertical"===f.orientation&&f.placement,inverted:f.inverted},h],"aria-orientation":f.orientation,__vars:{"--tabs-justify":a},children:o})});w.classes=m,w.displayName="@mantine/core/TabsList";let v={},j=(0,p.P9)((e,t)=>{let s=(0,u.Y)("TabsPanel",v,e),{children:o,className:l,value:i,classNames:a,styles:n,style:d,mod:c,keepMounted:h,...p}=s,f=x(),m=f.value===i,b=f.keepMounted||h?o:m?o:null;return(0,r.jsx)(g.a,{...p,...f.getStyles("panel",{className:l,classNames:a,styles:n,style:[d,m?void 0:{display:"none"}],props:s}),ref:t,mod:[{orientation:f.orientation},c],role:"tabpanel",id:f.getPanelId(i),"aria-labelledby":f.getTabId(i),children:b})});function y(e,t){let s=e;for(;(s=s.parentElement)&&!s.matches(t););return s}j.classes=m,j.displayName="@mantine/core/TabsPanel";var k=s(28757),P=s(63784),S=s(60642);let T={},E=(0,p.P9)((e,t)=>{let s=(0,u.Y)("TabsTab",T,e),{className:o,children:l,rightSection:i,leftSection:a,value:n,onClick:c,onKeyDown:h,disabled:g,color:p,style:f,classNames:m,styles:b,vars:w,mod:v,tabIndex:j,...E}=s,C=(0,k.xd)(),{dir:z}=(0,P.jH)(),_=x(),F=n===_.value,q={classNames:m,styles:b,props:s};return(0,r.jsxs)(S.N,{...E,..._.getStyles("tab",{className:o,style:f,variant:_.variant,...q}),disabled:g,unstyled:_.unstyled,variant:_.variant,mod:[{active:F,disabled:g,orientation:_.orientation,inverted:_.inverted,placement:"vertical"===_.orientation&&_.placement},v],ref:t,role:"tab",id:_.getTabId(n),"aria-selected":F,tabIndex:void 0!==j?j:F||null===_.value?0:-1,"aria-controls":_.getPanelId(n),onClick:e=>{_.onChange(_.allowTabDeactivation&&n===_.value?null:n),c?.(e)},__vars:{"--tabs-color":p?(0,d.r)(p,C):void 0},onKeyDown:function({parentSelector:e,siblingSelector:t,onKeyDown:s,loop:r=!0,activateOnFocus:o=!1,dir:l="rtl",orientation:i}){return a=>{s?.(a);let n=Array.from(y(a.currentTarget,e)?.querySelectorAll(t)||[]).filter(t=>y(a.currentTarget,e)===y(t,e)),d=n.findIndex(e=>a.currentTarget===e),c=function(e,t,s){for(let s=e+1;s<t.length;s+=1)if(!t[s].disabled)return s;if(s){for(let e=0;e<t.length;e+=1)if(!t[e].disabled)return e}return e}(d,n,r),u=function(e,t,s){for(let s=e-1;s>=0;s-=1)if(!t[s].disabled)return s;if(s){for(let e=t.length-1;e>-1;e-=1)if(!t[e].disabled)return e}return e}(d,n,r),h="rtl"===l?u:c,g="rtl"===l?c:u;switch(a.key){case"ArrowRight":"horizontal"===i&&(a.stopPropagation(),a.preventDefault(),n[h].focus(),o&&n[h].click());break;case"ArrowLeft":"horizontal"===i&&(a.stopPropagation(),a.preventDefault(),n[g].focus(),o&&n[g].click());break;case"ArrowUp":"vertical"===i&&(a.stopPropagation(),a.preventDefault(),n[u].focus(),o&&n[u].click());break;case"ArrowDown":"vertical"===i&&(a.stopPropagation(),a.preventDefault(),n[c].focus(),o&&n[c].click());break;case"Home":a.stopPropagation(),a.preventDefault(),n[0].disabled||n[0].focus();break;case"End":{a.stopPropagation(),a.preventDefault();let e=n.length-1;n[e].disabled||n[e].focus()}}}}({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:_.activateTabWithKeyboard,loop:_.loop,orientation:_.orientation||"horizontal",dir:z,onKeyDown:h}),children:[a&&(0,r.jsx)("span",{..._.getStyles("tabSection",q),"data-position":"left",children:a}),l&&(0,r.jsx)("span",{..._.getStyles("tabLabel",q),children:l}),i&&(0,r.jsx)("span",{..._.getStyles("tabSection",q),"data-position":"right",children:i})]})});E.classes=m,E.displayName="@mantine/core/TabsTab";let C="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",z={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},_=(0,n.V)((e,{radius:t,color:s,autoContrast:r})=>({root:{"--tabs-radius":(0,a.nJ)(t),"--tabs-color":(0,d.r)(s,e),"--tabs-text-color":!function(e,t){return"boolean"==typeof e?e:t.autoContrast}(r,e)?void 0:(0,c.w)({color:s,theme:e,autoContrast:r})}})),F=(0,p.P9)((e,t)=>{let s=(0,u.Y)("Tabs",z,e),{defaultValue:a,value:n,onChange:d,orientation:c,children:p,loop:x,id:b,activateTabWithKeyboard:w,allowTabDeactivation:v,variant:j,color:y,radius:k,inverted:P,placement:S,keepMounted:T,classNames:E,styles:F,unstyled:q,className:A,style:D,vars:I,autoContrast:L,mod:M,...Y}=s,B=(0,o.B)(b),[N,U]=(0,l.Z)({value:n,defaultValue:a,finalValue:null,onChange:d}),$=(0,h.I)({name:"Tabs",props:s,classes:m,className:A,style:D,classNames:E,styles:F,unstyled:q,vars:I,varsResolver:_});return(0,r.jsx)(f,{value:{placement:S,value:N,orientation:c,id:B,loop:x,activateTabWithKeyboard:w,getTabId:i(`${B}-tab`,C),getPanelId:i(`${B}-panel`,C),onChange:U,allowTabDeactivation:v,variant:j,color:y,radius:k,inverted:P,keepMounted:T,unstyled:q,getStyles:$},children:(0,r.jsx)(g.a,{ref:t,id:B,variant:j,mod:[{orientation:c,inverted:"horizontal"===c&&P,placement:"vertical"===c&&S},M],...$("root"),...Y,children:p})})});F.classes=m,F.displayName="@mantine/core/Tabs",F.Tab=E,F.Panel=j,F.List=w},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},66659:(e,t,s)=>{Promise.resolve().then(s.bind(s,11867))},74075:e=>{"use strict";e.exports=require("zlib")},75151:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>h,tree:()=>d});var r=s(65239),o=s(48088),l=s(88170),i=s.n(l),a=s(30893),n={};for(let e in a)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>a[e]);s.d(t,n);let d={children:["",{children:["(layout)",{children:["follows",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,11867)),"D:\\Projects\\WebSocket-Social\\fe-websocket\\src\\app\\(layout)\\follows\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,71941)),"D:\\Projects\\WebSocket-Social\\fe-websocket\\src\\app\\(layout)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,94431)),"D:\\Projects\\WebSocket-Social\\fe-websocket\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["D:\\Projects\\WebSocket-Social\\fe-websocket\\src\\app\\(layout)\\follows\\page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:o.RouteKind.APP_PAGE,page:"/(layout)/follows/page",pathname:"/follows",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},79551:e=>{"use strict";e.exports=require("url")},80731:(e,t,s)=>{Promise.resolve().then(s.bind(s,6407))},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},94365:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var r=s(43210);function o({value:e,defaultValue:t,finalValue:s,onChange:o=()=>{}}){let[l,i]=(0,r.useState)(void 0!==t?t:s);return void 0!==e?[e,o,!0]:[l,(e,...t)=>{i(e),o?.(e,...t)},!1]}},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[447,27,658,760,594,409,822,670],()=>s(75151));module.exports=r})();