(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[152],{722:(e,s,t)=>{"use strict";t.d(s,{j:()=>i});let a=t(3464).A.create({baseURL:"http://localhost:3001/api",headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>{let s=localStorage.getItem("token");return s&&(e.headers.Authorization="Bearer ".concat(s)),e});let i={register:async e=>(await a.post("/auth/register",e)).data,login:async e=>(await a.post("/auth/login",e)).data,forgotPassword:async e=>(await a.post("/auth/forgot-password",{email:e})).data,getCurrentUser:async()=>(await a.get("/auth/me")).data}},1297:(e,s,t)=>{"use strict";t.d(s,{K:()=>o,t:()=>c});var a=t(5155),i=t(2115),r=t(8268);let l=(0,i.createContext)({reels:[],setReels:()=>{},isLoading:!0,error:null,fetchReels:async()=>{},likeReel:async()=>{},saveReel:async()=>{},shareReel:async()=>{},addComment:async()=>{}}),n=[{id:"1",userId:"user1",username:"johndoe",userAvatar:"/default-avatar.png",videoUrl:"https://www.w3schools.com/html/mov_bbb.mp4",thumbnailUrl:"/reviewfilm.png",caption:"Amazing sunset at the beach! \uD83C\uDF05 #sunset #beach #vacation",hashtags:["sunset","beach","vacation"],likes:325,comments:14,shares:42,isLiked:!1,isSaved:!1,createdAt:"2023-04-01T12:00:00Z",updatedAt:"2023-04-01T12:00:00Z"},{id:"2",userId:"user2",username:"janesmith",userAvatar:"/default-avatar.png",videoUrl:"https://download.blender.org/peach/bigbuckbunny_movies/BigBuckBunny_320x180.mp4",thumbnailUrl:"/reviewfilm.png",caption:"Cooking my favorite pasta recipe! \uD83C\uDF5D #cooking #food #pasta",hashtags:["cooking","food","pasta"],likes:189,comments:7,shares:23,isLiked:!0,isSaved:!1,createdAt:"2023-04-02T15:30:00Z",updatedAt:"2023-04-02T15:30:00Z"},{id:"3",userId:"user3",username:"mikejohnson",userAvatar:"/default-avatar.png",videoUrl:"https://archive.org/download/ElephantsDream/ed_1024_512kb.mp4",thumbnailUrl:"/reviewfilm.png",caption:"New dance moves! \uD83D\uDC83 #dance #music #trending",hashtags:["dance","music","trending"],likes:567,comments:32,shares:78,isLiked:!1,isSaved:!0,createdAt:"2023-04-03T09:15:00Z",updatedAt:"2023-04-03T09:15:00Z"},{id:"4",userId:"user3",username:"mikejohnson",userAvatar:"/default-avatar.png",videoUrl:"https://archive.org/download/ElephantsDream/ed_1024_512kb.mp4",thumbnailUrl:"/reviewfilm.png",caption:"New dance moves! \uD83D\uDC83 #dance #music #trending",hashtags:["dance","music","trending"],likes:567,comments:32,shares:78,isLiked:!1,isSaved:!0,createdAt:"2023-04-03T09:15:00Z",updatedAt:"2023-04-03T09:15:00Z"},{id:"5",userId:"user3",username:"mikejohnson",userAvatar:"/default-avatar.png",videoUrl:"https://archive.org/download/ElephantsDream/ed_1024_512kb.mp4",thumbnailUrl:"/reviewfilm.png",caption:"New dance moves! \uD83D\uDC83 #dance #music #trending",hashtags:["dance","music","trending"],likes:567,comments:32,shares:78,isLiked:!1,isSaved:!0,createdAt:"2023-04-03T09:15:00Z",updatedAt:"2023-04-03T09:15:00Z"}];function o(e){let{children:s}=e,[t,o]=(0,i.useState)([]),[c,d]=(0,i.useState)(!0),[u,h]=(0,i.useState)(null),{user:m}=(0,r.P)(),x=async()=>{try{d(!0),setTimeout(()=>{o(n),d(!1)},1e3)}catch(e){h("Failed to fetch reels"),d(!1),console.error(e)}},v=async e=>{try{o(s=>s.map(s=>s.id===e?{...s,isLiked:!s.isLiked,likes:s.isLiked?s.likes-1:s.likes+1}:s))}catch(e){console.error(e)}},g=async e=>{try{o(s=>s.map(s=>s.id===e?{...s,isSaved:!s.isSaved}:s))}catch(e){console.error(e)}},p=async e=>{try{o(s=>s.map(s=>s.id===e?{...s,shares:s.shares+1}:s))}catch(e){console.error(e)}},f=async(e,s)=>{try{console.log("Adding comment to reel ".concat(e,": ").concat(s)),o(s=>s.map(s=>s.id===e?{...s,comments:s.comments+1}:s))}catch(e){console.error(e)}};return(0,i.useEffect)(()=>{m&&x()},[m]),(0,a.jsx)(l.Provider,{value:{reels:t,setReels:o,isLoading:c,error:u,fetchReels:x,likeReel:v,saveReel:g,shareReel:p,addComment:f},children:s})}function c(){let e=(0,i.useContext)(l);if(void 0===e)throw Error("useReelsData must be used within a ReelProvider");return e}},2878:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>U});var a=t(5155),i=t(2115),r=t(1297),l=t(8887),n=t(3191),o=t(1954),c=t(2823),d=t(7287),u=t(610),h=t(6707),m=t(4416),x=t(2486),v=t(2152),g=t(5273),p=t(1976),f=t(6516),j=t(2108),w=t(1366);function b(e){var s;let{reel:t,onNext:b,onPrev:k}=e,[y,N]=(0,i.useState)(!0),[z,A]=(0,i.useState)(!0),[E,S]=(0,i.useState)(""),[C,U]=(0,i.useState)(!1),I=(0,i.useRef)(null),{likeReel:M,saveReel:R,shareReel:T,addComment:L}=(0,r.t)(),_=window.innerWidth>=1024;(0,i.useEffect)(()=>{I.current&&(I.current.muted=y)},[y]);let P=()=>{E.trim()&&(L(t.id,E),S(""))},Z=()=>(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)(l.E,{color:"white",fw:500,children:["Comments (",t.comments,")"]}),!_&&(0,a.jsx)(n.M,{variant:"subtle",color:"white",size:"lg",onClick:()=>U(!1),children:(0,a.jsx)(m.A,{size:20})})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,a.jsx)(o.T,{placeholder:"Add a comment...",value:E,onChange:e=>S(e.target.value),className:"flex-1",minRows:1,maxRows:3,styles:{input:{backgroundColor:"rgba(255, 255, 255, 0.1)",color:"white",border:"none"}}}),(0,a.jsx)(n.M,{variant:"filled",color:"blue",size:"lg",onClick:P,disabled:!E.trim(),children:(0,a.jsx)(x.A,{size:16})})]}),(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsx)(l.E,{color:"white",size:"sm",className:"text-center opacity-70",children:"No comments yet. Be the first to comment!"})})]});return(0,a.jsxs)("div",{className:"relative h-[80vh] w-full max-w-2xl mx-auto bg-black rounded-lg overflow-hidden",children:[(0,a.jsxs)("div",{className:"relative h-full w-full",children:[(0,a.jsx)("video",{ref:I,src:t.videoUrl,className:"h-full w-full object-cover",loop:!0,playsInline:!0,autoPlay:!0,muted:y,onClick:()=>{I.current&&(z?I.current.pause():I.current.play(),A(!z))},onEnded:()=>{b&&b()}}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/70 to-transparent",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(n.M,{variant:"subtle",color:"white",size:"lg",onClick:()=>N(!y),children:y?(0,a.jsx)(v.A,{size:20}):(0,a.jsx)(g.A,{size:20})}),(0,a.jsx)(l.E,{color:"white",size:"sm",children:y?"Unmute":"Mute"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(n.M,{variant:"subtle",color:"white",size:"lg",onClick:()=>{M(t.id)},children:(0,a.jsx)(p.A,{size:20,fill:t.isLiked?"red":"none",color:t.isLiked?"red":"white"})}),(0,a.jsx)(l.E,{color:"white",size:"sm",children:t.likes}),(0,a.jsx)(n.M,{variant:"subtle",color:"white",size:"lg",onClick:()=>{T(t.id)},children:(0,a.jsx)(f.A,{size:20})}),(0,a.jsx)(l.E,{color:"white",size:"sm",children:t.shares}),(0,a.jsx)(n.M,{variant:"subtle",color:"white",size:"lg",onClick:()=>{R(t.id)},children:(0,a.jsx)(j.A,{size:20,fill:t.isSaved?"white":"none"})}),!_&&(0,a.jsx)(n.M,{variant:"subtle",color:"white",size:"lg",onClick:()=>U(!0),children:(0,a.jsx)(w.A,{size:20})})]})]})})]}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/70 to-transparent",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(c.e,{src:t.userAvatar,alt:t.username,radius:"xl",size:"md"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)(l.E,{color:"white",fw:500,children:["@",t.username]}),(0,a.jsx)(l.E,{color:"white",size:"sm",className:"mt-1",children:(s=t.caption||"")?s.split(" ").map((e,s)=>e.startsWith("#")?(0,a.jsxs)("span",{className:"text-blue-500 hover:underline cursor-pointer",children:[e," "]},s):e+" "):""}),(0,a.jsx)(l.E,{color:"white",size:"xs",className:"mt-1 opacity-70",children:(e=>{let s=new Date(e),t=Math.floor((new Date().getTime()-s.getTime())/1e3);return t<60?"".concat(t," seconds ago"):t<3600?"".concat(Math.floor(t/60)," minutes ago"):t<86400?"".concat(Math.floor(t/3600)," hours ago"):"".concat(Math.floor(t/86400)," days ago")})(t.createdAt)})]})]})}),_&&(0,a.jsx)(d.t,{className:"absolute right-0 top-0 bottom-0 w-1/3 bg-white/10 backdrop-blur-md p-4 overflow-y-auto",children:(0,a.jsx)(Z,{})}),(0,a.jsx)(u.a,{opened:C,onClose:()=>U(!1),size:"100%",fullScreen:!0,padding:"md",withCloseButton:!1,styles:{body:{backgroundColor:"black",height:"100%",padding:"1rem"}},children:(0,a.jsx)(Z,{})}),k&&(0,a.jsx)(h.$,{variant:"subtle",color:"white",className:"absolute left-2 top-1/2 transform -translate-y-1/2",onClick:k,children:"Previous"}),b&&(0,a.jsx)(h.$,{variant:"subtle",color:"white",className:"absolute right-2 top-1/2 transform -translate-y-1/2",onClick:b,children:"Next"})]})}var k=t(7449),y=t(5690),N=t(6766);function z(e){let{reels:s,onReelClick:t}=e,[r,o]=(0,i.useState)(null);return(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-4",children:s.map(e=>(0,a.jsxs)(k.Z,{className:"relative overflow-hidden cursor-pointer group",onClick:()=>t(e),onMouseEnter:()=>o(e.id),onMouseLeave:()=>o(null),children:[(0,a.jsxs)("div",{className:"relative aspect-[9/16] w-full",children:[(0,a.jsx)(N.default,{src:e.thumbnailUrl||"/placeholder-video.jpg",alt:e.caption||"Reel thumbnail",fill:!0,className:"object-cover"}),r===e.id&&(0,a.jsx)("video",{src:e.videoUrl,className:"absolute inset-0 w-full h-full object-cover",muted:!0,autoPlay:!0,loop:!0,playsInline:!0}),(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,a.jsx)(y.A,{size:40,className:"text-white"})}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-2 bg-gradient-to-t from-black/70 to-transparent",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(c.e,{src:e.userAvatar,alt:e.username,radius:"xl",size:"sm"}),(0,a.jsxs)(l.E,{color:"white",size:"sm",truncate:!0,children:["@",e.username]})]})}),(0,a.jsxs)("div",{className:"absolute top-0 right-0 p-2 flex flex-col items-end space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(n.M,{variant:"subtle",color:"white",size:"sm",children:(0,a.jsx)(p.A,{size:16,fill:e.isLiked?"red":"none",color:e.isLiked?"red":"white"})}),(0,a.jsx)(l.E,{color:"white",size:"xs",children:e.likes})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(n.M,{variant:"subtle",color:"white",size:"sm",children:(0,a.jsx)(w.A,{size:16})}),(0,a.jsx)(l.E,{color:"white",size:"xs",children:e.comments})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(n.M,{variant:"subtle",color:"white",size:"sm",children:(0,a.jsx)(f.A,{size:16})}),(0,a.jsx)(l.E,{color:"white",size:"xs",children:e.shares})]}),(0,a.jsx)(n.M,{variant:"subtle",color:"white",size:"sm",children:(0,a.jsx)(j.A,{size:16,fill:e.isSaved?"white":"none"})})]})]}),e.caption&&(0,a.jsx)(l.E,{size:"sm",className:"mt-2 line-clamp-2",children:e.caption})]},e.id))})}var A=t(6185),E=t(7203),S=t(8773),C=t(9869);function U(){let[e,s]=(0,i.useState)("grid"),[t,l]=(0,i.useState)(null),[n,o]=(0,i.useState)(!1),{reels:c,isLoading:d,error:m}=(0,r.t)();return d?(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)(A.E,{height:36,width:200}),(0,a.jsx)(A.E,{height:36,width:120})]}),(0,a.jsx)(E.x,{children:[...Array(6)].map((e,s)=>(0,a.jsxs)(E.x.Col,{span:{base:12,sm:6,md:4},children:[(0,a.jsx)(A.E,{height:400,radius:"md"}),(0,a.jsx)(A.E,{height:20,width:"70%",mt:"sm"}),(0,a.jsx)(A.E,{height:20,width:"40%",mt:"xs"})]},s))})]}):m?(0,a.jsxs)("div",{children:["Error: ",m]}):(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)(S.I,{value:e,onChange:e=>{s(e),"grid"===e&&l(null)},data:[{label:"Grid View",value:"grid"},{label:"Full View",value:"full"}]}),(0,a.jsx)(h.$,{leftSection:(0,a.jsx)(C.A,{size:20}),onClick:()=>o(!0),children:"Upload Reel"})]}),"grid"===e?(0,a.jsx)(z,{reels:c,onReelClick:e=>{l(e),s("full")}}):t&&(0,a.jsx)(b,{reel:t,onNext:()=>{if(!t)return;let e=c.findIndex(e=>e.id===t.id);e<c.length-1&&l(c[e+1])},onPrev:()=>{if(!t)return;let e=c.findIndex(e=>e.id===t.id);e>0&&l(c[e-1])}}),(0,a.jsx)(u.a,{opened:n,onClose:()=>o(!1),title:"Upload New Reel",size:"lg"})]})}},5407:(e,s,t)=>{"use strict";t.d(s,{R:()=>l,v:()=>n});var a=t(5155),i=t(2115),r=t(722);let l=(0,i.createContext)(void 0),n=e=>{let{children:s}=e,[t,n]=(0,i.useState)(null),[o,c]=(0,i.useState)(!0),[d,u]=(0,i.useState)(null),h=async()=>{try{if(!localStorage.getItem("token")){n(null);return}let e=await r.j.getCurrentUser();n(e.user)}catch(e){console.error("Error fetching user data:",e),u("Failed to load user data"),n(null),localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("tokenExpiration")}finally{c(!1)}};return(0,i.useEffect)(()=>{h()},[]),(0,a.jsx)(l.Provider,{value:{user:t,setUser:e=>{if(n(e),e){let s=new Date().getTime()+864e5;localStorage.setItem("tokenExpiration",s.toString()),localStorage.setItem("user",JSON.stringify(e))}else localStorage.removeItem("user"),localStorage.removeItem("tokenExpiration")},isLoading:o,error:d,refreshUserData:h},children:s})}},8268:(e,s,t)=>{"use strict";t.d(s,{P:()=>r});var a=t(2115),i=t(5407);let r=()=>{let e=(0,a.useContext)(i.R);if(void 0===e)throw Error("useUserData must be used within a UserProvider");return e}},9882:(e,s,t)=>{Promise.resolve().then(t.bind(t,2878))}},e=>{var s=s=>e(e.s=s);e.O(0,[207,193,525,766,926,843,441,684,358],()=>s(9882)),_N_E=e.O()}]);