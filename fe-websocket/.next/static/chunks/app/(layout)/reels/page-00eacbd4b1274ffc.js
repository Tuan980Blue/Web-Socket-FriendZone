(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[152],{6453:(e,s,l)=>{"use strict";l.r(s),l.d(s,{default:()=>P});var a=l(5155),i=l(2115),t=l(5494),r=l(6201),c=l(8854),n=l(4781);let o=(0,i.createContext)({reels:[],setReels:()=>{},isLoading:!0,error:null,fetchReels:async()=>{},likeReel:async()=>{},saveReel:async()=>{},shareReel:async()=>{},addComment:async()=>{}}),d=[{id:"1",userId:"user1",username:"johndoe",userAvatar:"/default-avatar.png",videoUrl:"https://example.com/video1.mp4",thumbnailUrl:"https://example.com/thumbnail1.jpg",caption:"Amazing sunset at the beach! \uD83C\uDF05 #sunset #beach #vacation",hashtags:["sunset","beach","vacation"],likes:325,comments:14,shares:42,isLiked:!1,isSaved:!1,createdAt:"2023-04-01T12:00:00Z",updatedAt:"2023-04-01T12:00:00Z"},{id:"2",userId:"user2",username:"janesmith",userAvatar:"/default-avatar.png",videoUrl:"https://example.com/video2.mp4",thumbnailUrl:"https://example.com/thumbnail2.jpg",caption:"Cooking my favorite pasta recipe! \uD83C\uDF5D #cooking #food #pasta",hashtags:["cooking","food","pasta"],likes:189,comments:7,shares:23,isLiked:!0,isSaved:!1,createdAt:"2023-04-02T15:30:00Z",updatedAt:"2023-04-02T15:30:00Z"},{id:"3",userId:"user3",username:"mikejohnson",userAvatar:"/default-avatar.png",videoUrl:"https://example.com/video3.mp4",thumbnailUrl:"https://example.com/thumbnail3.jpg",caption:"New dance moves! \uD83D\uDC83 #dance #music #trending",hashtags:["dance","music","trending"],likes:567,comments:32,shares:78,isLiked:!1,isSaved:!0,createdAt:"2023-04-03T09:15:00Z",updatedAt:"2023-04-03T09:15:00Z"}];function m(e){let{children:s}=e,[l,t]=(0,i.useState)([]),[r,c]=(0,i.useState)(!0),[m,x]=(0,i.useState)(null),{user:h}=(0,n.P)(),u=async()=>{try{c(!0),setTimeout(()=>{t(d),c(!1)},1e3)}catch(e){x("Failed to fetch reels"),c(!1),console.error(e)}},p=async e=>{try{t(s=>s.map(s=>s.id===e?{...s,isLiked:!s.isLiked,likes:s.isLiked?s.likes-1:s.likes+1}:s))}catch(e){console.error(e)}},j=async e=>{try{t(s=>s.map(s=>s.id===e?{...s,isSaved:!s.isSaved}:s))}catch(e){console.error(e)}},v=async e=>{try{t(s=>s.map(s=>s.id===e?{...s,shares:s.shares+1}:s))}catch(e){console.error(e)}},g=async(e,s)=>{try{console.log("Adding comment to reel ".concat(e,": ").concat(s)),t(s=>s.map(s=>s.id===e?{...s,comments:s.comments+1}:s))}catch(e){console.error(e)}};return(0,i.useEffect)(()=>{h&&u()},[h]),(0,a.jsx)(o.Provider,{value:{reels:l,setReels:t,isLoading:r,error:m,fetchReels:u,likeReel:p,saveReel:j,shareReel:v,addComment:g},children:s})}function x(){let e=(0,i.useContext)(o);if(void 0===e)throw Error("useReelsData must be used within a ReelProvider");return e}var h=l(3191),u=l(8887),p=l(2823),j=l(7287),v=l(1954),g=l(6707),f=l(2152),b=l(5273),N=l(1976),w=l(6516),y=l(2108),k=l(1366),z=l(2486);function A(e){var s;let{reel:l,onNext:t,onPrev:r}=e,[c,n]=(0,i.useState)(!0),[o,d]=(0,i.useState)(!0),[m,A]=(0,i.useState)(""),E=(0,i.useRef)(null),{likeReel:C,saveReel:M,shareReel:R,addComment:S}=x();return(0,i.useEffect)(()=>{E.current&&(E.current.muted=c)},[c]),(0,a.jsxs)("div",{className:"relative h-[80vh] w-full max-w-2xl mx-auto bg-black rounded-lg overflow-hidden",children:[(0,a.jsxs)("div",{className:"relative h-full w-full",children:[(0,a.jsx)("video",{ref:E,src:l.videoUrl,className:"h-full w-full object-cover",loop:!0,playsInline:!0,autoPlay:!0,muted:c,onClick:()=>{E.current&&(o?E.current.pause():E.current.play(),d(!o))},onEnded:()=>{t&&t()}}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/70 to-transparent",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(h.M,{variant:"subtle",color:"white",size:"lg",onClick:()=>n(!c),children:c?(0,a.jsx)(f.A,{size:20}):(0,a.jsx)(b.A,{size:20})}),(0,a.jsx)(u.E,{color:"white",size:"sm",children:c?"Unmute":"Mute"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(h.M,{variant:"subtle",color:"white",size:"lg",onClick:()=>{C(l.id)},children:(0,a.jsx)(N.A,{size:20,fill:l.isLiked?"red":"none",color:l.isLiked?"red":"white"})}),(0,a.jsx)(u.E,{color:"white",size:"sm",children:l.likes}),(0,a.jsx)(h.M,{variant:"subtle",color:"white",size:"lg",onClick:()=>{R(l.id)},children:(0,a.jsx)(w.A,{size:20})}),(0,a.jsx)(u.E,{color:"white",size:"sm",children:l.shares}),(0,a.jsx)(h.M,{variant:"subtle",color:"white",size:"lg",onClick:()=>{M(l.id)},children:(0,a.jsx)(y.A,{size:20,fill:l.isSaved?"white":"none"})})]})]})})]}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/70 to-transparent",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(p.e,{src:l.userAvatar,alt:l.username,radius:"xl",size:"md"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)(u.E,{color:"white",fw:500,children:["@",l.username]}),(0,a.jsx)(u.E,{color:"white",size:"sm",className:"mt-1",children:(s=l.caption||"")?s.split(" ").map((e,s)=>e.startsWith("#")?(0,a.jsxs)("span",{className:"text-blue-500 hover:underline cursor-pointer",children:[e," "]},s):e+" "):""}),(0,a.jsx)(u.E,{color:"white",size:"xs",className:"mt-1 opacity-70",children:(e=>{let s=new Date(e),l=Math.floor((new Date().getTime()-s.getTime())/1e3);return l<60?"".concat(l," seconds ago"):l<3600?"".concat(Math.floor(l/60)," minutes ago"):l<86400?"".concat(Math.floor(l/3600)," hours ago"):"".concat(Math.floor(l/86400)," days ago")})(l.createdAt)})]})]})}),(0,a.jsxs)(j.t,{className:"absolute right-0 top-0 bottom-0 w-80 bg-white/10 backdrop-blur-md p-4 overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)(u.E,{color:"white",fw:500,children:["Comments (",l.comments,")"]}),(0,a.jsx)(h.M,{variant:"subtle",color:"white",size:"lg",children:(0,a.jsx)(k.A,{size:20})})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,a.jsx)(v.T,{placeholder:"Add a comment...",value:m,onChange:e=>A(e.target.value),className:"flex-1",minRows:1,maxRows:3,styles:{input:{backgroundColor:"rgba(255, 255, 255, 0.1)",color:"white",border:"none"}}}),(0,a.jsx)(h.M,{variant:"filled",color:"blue",size:"lg",onClick:()=>{m.trim()&&(S(l.id,m),A(""))},disabled:!m.trim(),children:(0,a.jsx)(z.A,{size:16})})]}),(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsx)(u.E,{color:"white",size:"sm",className:"text-center opacity-70",children:"No comments yet. Be the first to comment!"})})]}),r&&(0,a.jsx)(g.$,{variant:"subtle",color:"white",className:"absolute left-2 top-1/2 transform -translate-y-1/2",onClick:r,children:"Previous"}),t&&(0,a.jsx)(g.$,{variant:"subtle",color:"white",className:"absolute right-2 top-1/2 transform -translate-y-1/2",onClick:t,children:"Next"})]})}var E=l(7449),C=l(5690),M=l(6766);function R(e){let{reels:s,onReelClick:l}=e,[t,r]=(0,i.useState)(null);return(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:s.map(e=>(0,a.jsxs)(E.Z,{className:"relative overflow-hidden cursor-pointer group",onClick:()=>l(e),onMouseEnter:()=>r(e.id),onMouseLeave:()=>r(null),children:[(0,a.jsxs)("div",{className:"relative aspect-[9/16] w-full",children:[(0,a.jsx)(M.default,{src:e.thumbnailUrl||"/placeholder-video.jpg",alt:e.caption||"Reel thumbnail",fill:!0,className:"object-cover"}),t===e.id&&(0,a.jsx)("video",{src:e.videoUrl,className:"absolute inset-0 w-full h-full object-cover",muted:!0,autoPlay:!0,loop:!0,playsInline:!0}),(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30 opacity-0 group-hover:opacity-100 transition-opacity",children:(0,a.jsx)(C.A,{size:40,className:"text-white"})}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-2 bg-gradient-to-t from-black/70 to-transparent",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(p.e,{src:e.userAvatar,alt:e.username,radius:"xl",size:"sm"}),(0,a.jsxs)(u.E,{color:"white",size:"sm",truncate:!0,children:["@",e.username]})]})}),(0,a.jsxs)("div",{className:"absolute top-0 right-0 p-2 flex flex-col items-end space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(h.M,{variant:"subtle",color:"white",size:"sm",children:(0,a.jsx)(N.A,{size:16,fill:e.isLiked?"red":"none",color:e.isLiked?"red":"white"})}),(0,a.jsx)(u.E,{color:"white",size:"xs",children:e.likes})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(h.M,{variant:"subtle",color:"white",size:"sm",children:(0,a.jsx)(k.A,{size:16})}),(0,a.jsx)(u.E,{color:"white",size:"xs",children:e.comments})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(h.M,{variant:"subtle",color:"white",size:"sm",children:(0,a.jsx)(w.A,{size:16})}),(0,a.jsx)(u.E,{color:"white",size:"xs",children:e.shares})]}),(0,a.jsx)(h.M,{variant:"subtle",color:"white",size:"sm",children:(0,a.jsx)(y.A,{size:16,fill:e.isSaved?"white":"none"})})]})]}),e.caption&&(0,a.jsx)(u.E,{size:"sm",className:"mt-2 line-clamp-2",children:e.caption})]},e.id))})}var S=l(8773),U=l(610),L=l(9803),T=l(9869);function I(){let[e,s]=(0,i.useState)("grid"),[l,n]=(0,i.useState)(null),[o,d]=(0,i.useState)(!1),{reels:m,isLoading:h,error:p}=x();return h?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900",children:[(0,a.jsx)(t.A,{}),(0,a.jsx)(r.A,{}),(0,a.jsx)(c.A,{}),(0,a.jsx)("div",{className:"pl-64 pr-80 pt-16",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-8 bg-gray-200 dark:bg-gray-700 rounded w-1/4 mb-4"}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[1,2,3,4,5,6,7,8].map(e=>(0,a.jsx)("div",{className:"aspect-[9/16] bg-gray-200 dark:bg-gray-700 rounded"},e))})]})})})]}):p?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900",children:[(0,a.jsx)(t.A,{}),(0,a.jsx)(r.A,{}),(0,a.jsx)(c.A,{}),(0,a.jsx)("div",{className:"pl-64 pr-80 pt-16",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,a.jsx)("div",{className:"bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-100 p-4 rounded-lg",children:(0,a.jsxs)(u.E,{children:["Error: ",p]})})})})]}):0===m.length?(0,a.jsx)("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(L.A,{size:64,className:"mx-auto text-gray-400 dark:text-gray-600 mb-4"}),(0,a.jsx)(u.E,{size:"xl",fw:500,className:"mb-2",children:"No Reels Yet"}),(0,a.jsx)(u.E,{color:"dimmed",className:"mb-6",children:"Be the first to create a Reel!"}),(0,a.jsxs)(g.$,{onClick:()=>d(!0),children:[(0,a.jsx)(T.A,{size:16,className:"mr-2"}),"Upload Reel"]})]})})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900",children:[(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[(0,a.jsx)(u.E,{size:"xl",fw:700,className:"mb-4 sm:mb-0",children:"Reels"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(S.I,{value:e,onChange:e=>{s(e),"grid"===e?n(null):m.length>0&&!l&&n(m[0])},data:[{label:"Grid View",value:"grid"},{label:"Full View",value:"full"}]}),(0,a.jsxs)(g.$,{onClick:()=>d(!0),children:[(0,a.jsx)(T.A,{size:16,className:"mr-2"}),"Upload"]})]})]}),"grid"===e?(0,a.jsx)(R,{reels:m,onReelClick:e=>{n(e),s("full")}}):(0,a.jsx)("div",{className:"flex justify-center",children:l&&(0,a.jsx)(A,{reel:l,onNext:()=>{if(!l)return;let e=m.findIndex(e=>e.id===l.id);e<m.length-1&&n(m[e+1])},onPrev:()=>{if(!l)return;let e=m.findIndex(e=>e.id===l.id);e>0&&n(m[e-1])}})})]}),(0,a.jsx)(U.a,{opened:o,onClose:()=>d(!1),title:"Upload New Reel",size:"lg",children:(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)(u.E,{className:"mb-4",children:"Upload functionality will be implemented here."}),(0,a.jsx)(g.$,{onClick:()=>d(!1),children:"Close"})]})})]})}function P(){return(0,a.jsx)(m,{children:(0,a.jsx)(I,{})})}},9882:(e,s,l)=>{Promise.resolve().then(l.bind(l,6453))}},e=>{var s=s=>e(e.s=s);e.O(0,[545,45,939,169,335,310,783,441,684,358],()=>s(9882)),_N_E=e.O()}]);